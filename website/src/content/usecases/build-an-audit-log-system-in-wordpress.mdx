---
title: Build an audit log system in Wordpress
slug: build-an-audit-log-system-in-wordpress
description: Learn how to build an audit log system in Wordpress using Tune to record user actions and site events efficiently.
date: 2024-06-23
tags:
  - wordpress
  - audit-log
  - php
icon: ðŸ“œ
---

# What is an audit log in Wordpress?

An audit log records actions and changes on your Wordpress site. It can track user logins, post updates, plugin activations, and more.

For example, you might want to know when a user edits a page or deletes a comment. An audit log helps you monitor these events and find issues quickly.

# Tracking events with Tune

Tune is an open source service for capturing events in your app. You can use it to send audit events from Wordpress to a dashboard.

![Tune usage](https://tune/images/misc/ops-usage.jpg)

With Tune you get:
- A central place for all site events.
- Easy search and filter.
- Secure API and data handling.

# Setting up Tune

Follow these steps to get started:

1. Sign up for an account at [app.tune](https://app.tune).
2. Create a new project and copy your API key.
3. Install [Guzzle](https://github.com/guzzle/guzzle) in your Wordpress plugin or theme.
4. Use the API key in your code to send events.

# Code examples

Below are examples of how to log key actions in Wordpress using PHP and Guzzle.

## 1. Log user login

This code sends an event when a user logs in.

```php
<?php
use GuzzleHttp\Client;

$client = new Client();
$apiKey = 'YOUR_API_KEY';

$payload = [
  'name' => 'user_logged_in',
  'avatar' => 'ðŸ”‘',
  'content' => "User John Doe logged in",
  'tags' => ['audit', 'login'],
  'metadata' => [
    'user_id' => 45
  ]
];

$client->post('https://api.tune/events/ingest', [
  'headers' => [
    'Authorization' => "Bearer $apiKey",
    'Content-Type' => 'application/json'
  ],
  'json' => $payload
]);
```

## 2. Log post creation

This example records when a new post is created.

```php
<?php
use GuzzleHttp\Client;

$client = new Client();
// ...

$payload = [
  'name' => 'post_created',
  'avatar' => 'ðŸ“',
  'content' => "User Jane Smith created post 'Hello World'",
  'tags' => ['audit', 'post'],
  'metadata' => [
    'post_id' => 123,
    'user_id' => 77
  ]
];

// ...
```

## 3. Log plugin activation

Track when a plugin is activated.

```php
<?php
use GuzzleHttp\Client;

$client = new Client();
// ...

$payload = [
  'name' => 'plugin_activated',
  'avatar' => 'ðŸ”Œ',
  'content' => "Plugin 'SEO Optimizer' activated by admin",
  'tags' => ['audit', 'plugin'],
  'metadata' => [
    'plugin_slug' => 'seo-optimizer',
    'user_role' => 'administrator'
  ]
];

// ...
```

## 4. Log comment moderation

Capture comment approval or deletion.

```php
<?php
use GuzzleHttp\Client;

$client = new Client();
// ...

$payload = [
  'name' => 'comment_deleted',
  'avatar' => 'ðŸ—‘ï¸',
  'content' => "Comment #456 deleted by moderator",
  'tags' => ['audit', 'comment'],
  'metadata' => [
    'comment_id' => 456,
    'moderator_id' => 88
  ]
];

// ...
```

# Conclusion

An audit log helps you understand site activity and troubleshoot issues.

Tune makes it simple to send and view events in one place.

Learn more at https://tune and try examples in the [Playground](https://tune/playground).